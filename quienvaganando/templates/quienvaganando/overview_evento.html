{% extends 'quienvaganando/base.html' %}

{% block subtitle %}{{nombre}}{% endblock subtitle %}

{% block content %}

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    .container{
      display: flex;
      gap: 50px
    }
    .table-container{
      width: 100%;
      overflow-x: auto;
      overflow-y: auto;
      max-height: 300px;
    }
    .eliminar-evento {
      position: absolute;
      top: 150px;
      right: 20px;
   }
  </style>
</head>

<body>
  <h2 style="font-family: 'DM Sans', sans-serif; text-align: center;" > {{ nombre_torneo }}: {{ nombre_evento }}</h2>
  <h5 style="text-align: center;">{{ descripcion }}</h5>
  {% if is_owner %}
  <a href="{% url 'eliminar_evento' uuid_torneo=uuid_torneo nombre_evento=nombre_evento %}" class="btn btn-danger eliminar-evento">Eliminar Evento <i class="fas fa-trash-alt"></i></a>
  {% endif %}
  <div style="float:left">
  
    <!-- TABLA PUNTAJES -->
    <div class="container">
      <div class="col-7" style="font-family: 'DM Sans', sans-serif;" style="display: flex">
        <h4 class="text-danger fs-3 ms-4 "  style="font-family: 'DM Sans', sans-serif;" > Tabla de puntajes</h4>
        <table class="table">
          <thead>
            <tr class="table-danger">
              <th scope="col" >Posición</th>
              <th scope="col" >Equipo</th>
              <th scope="col" >Puntaje</th>
            </tr>
          </thead>
          <tbody>
            {% for posicion in posiciones %}
            <tr>
              <td class="fs-5" >{{ posicion.posicion }}</td>
              <td class="fs-5" >{{ posicion.nombre }}</td>
              <td class="fs-5" >{{ posicion.puntaje }}</td>
            </tr> 
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Partidos Pasados -->
    <!-- como una tabla mientras, después podríamos hacer algo más lindo -->
    <div class="container">
      
      <div class="col-7" style="font-family: 'DM Sans', sans-serif;">
        <h4 class="text-danger fs-3 ms-4 scroll"  style="font-family: 'DM Sans', sans-serif;" > Partidos Pasados</h4>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr class="table-danger">
                <th scope="col" >Fecha</th>
                <th scope="col" >Categoría</th>
                <th scope="col" ></th>
                <th scope="col" >Resultado</th>
                <th scope="col" ></th>                
              </tr>
            </thead>
            <tbody>
              {% for partido in partidos_pasados %}
                <tr>
                  <td class="fs-5" >{{ partido.fecha|date:"d/m/y" }}</td>
                  <td class="fs-5" >{{ partido.categoria }}</td>
                  <td class="fs-5" >{{ partido.nombre_equipo_a }}</td>
                  <td class="fs-5" >{{ partido.resultado_a }} - {{partido.resultado_b}}</td>
                  <td class="fs-5" >{{ partido.nombre_equipo_b }}</td>
                </tr> 
                {% endfor %}
              </tbody>
            </table>
        </div>
      </div>

      <!-- Partidos Próximos -->

      <div class="col-7" style="font-family: 'DM Sans', sans-serif;">
        <h4 class="text-danger fs-3 ms-4 scroll"  style="font-family: 'DM Sans', sans-serif;" > Partidos Próximos</h4>
        <div class="table-container">      
          <table class="table">
            <thead>
              <tr class="table-danger">
                <th scope="col" >Fecha</th>
                <th scope="col" >Hora</th>
                <th scope="col" >Lugar</th>
                <th scope="col" >Categoría</th>
                <th scope="col" >Partido</th>
                {% if is_owner %}
                <th scope="col" ></th>
                {% endif %}
              </tr>
            </thead>
            <tbody>
              {% for partido in partidos_proximos %}
              <tr>
                <td class="fs-5" >{{ partido.fecha|date:"d/m/y" }}</td>
                <td class="fs-5" >{{ partido.hora }}</td>
                <td class="fs-5" >{{ partido.lugar }}</td>
                <td class="fs-5" >{{ partido.categoria }}</td>
                <td class="fs-5" >{{ partido.nombre_equipo_a }} vs. {{partido.nombre_equipo_b}}</td>
                {% if is_owner %}
                <td class="fs-5" >
                  <form action="{% url 'eliminar_partido' uuid_torneo nombre_evento partido.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                  </form>
                </td>
                {% endif %}
              </tr> 
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

</body>

{% endblock content %}